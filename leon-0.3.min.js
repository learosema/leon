(function(){var c={error:null,typeGuessing:!0,encode:function(a){if(typeof a!="object")return c.encodeVal(a);var d,e,f=0,g,h=[];for(d in a){e=a[d];if(typeof e=="object"){g=c.encode(a[d]);e="~"+g;if(g.length===0||g.length>0&&g[g.length-1]==="_")e+="-0";e+="~"}else e=c.encodeVal(e);d==f?h.push(e):h.push(c.esc(d)+"_"+e);f++}return h.join(".")},esc:function(a){a=a.replace(/\-([^1-9])/g,"--$1");a=a.replace(/\_/g,"-_");a=a.replace(/\./g,"-.");return a=a.replace(/\~/g,"-~")},unEsc:function(a){a=a.replace(/\-\-0/g,
"---00");a=a.replace(/\-0/g,"");a=a.replace(/\-\-/g,"-");a=a.replace(/\-\_/g,"_");a=a.replace(/\-\./g,".");return a=a.replace(/\-\~/g,"~")},encodeVal:function(a){if(typeof a=="string")return c.esc(a);if(typeof a=="boolean")return a?"true":"false";if(typeof a=="number")return c.esc(a.toString());return""},guessValueType:function(a){if(c.typeGuessing===!1||typeof a!=="string")return a;if(a==="")return[];if(/^[-+]?\d+(e[0-9]+)?$/.test(a))return parseInt(a);if(/^[-+]?[0-9]+(\.[0-9]+)?(e[0-9]+)?$/.test(a))return parseFloat(a);
if(a==="true"||a==="false")return a==="true"?!0:!1;if(a!=="undefined"){if(a==="null")return null;if(a==="NaN")return NaN;return a}},decode:function(a){var d=void 0,e,f,g=0,h=1,j=-1,b,i=0,k=0;c.error=null;if(typeof a!=="string")c.error="bad parameter.";else{a+=".";for(b=0;b<a.length;b++)if(a[b]==="-"){if(b===a.length-1||"0123456789~-_.".indexOf(a[b+1])<0){c.error="parse error: unexpected - at "+b;return}b++}else if(a[b]==="_"&&i===0){if(j!==-1){c.error="parse error: unexpected _ at "+b;return}j=b}else if(a[b]===
"~")if(b===0)i++,h=1;else{if(a[b-1]==="_"||a[b-1]===".")if(b<2||a[b-2]!="-"){i++;h=1;continue}if(a[b-1]==="~"&&(b<2||a[b-1]!="-"))i+=h;else if(i--,h=-1,i<0){c.error="parse error: unexpected ~ at "+b;return}}else if(a[b]==="."&&i===0)if(j>=k?(e=c.unEsc(a.slice(k,j)),f=a.slice(j+1,b),d===void 0&&(d={})):(e=g,f=a.slice(k,b),d===void 0&&(d=[])),k=b+1,g++,j=-1,f[0]==="~"){if(d[e]=c.decode(f.slice(1,f.lastIndexOf("~"))),d[e]==="undefined"){LEON.error="Error in sub expression "+f+":\n"+LEON.error;return}}else d[e]=
c.guessValueType(c.unEsc(f));if(i>0)c.error="parse error: missing ~";else{if(d instanceof Array&&d.length===1)return d[0];return d}}}};if(window.LEON===void 0)window.LEON={encode:c.encode,decode:c.decode,error:function(){return c.error},typeGuessing:function(a){c.typeGuessing=a}}})();
